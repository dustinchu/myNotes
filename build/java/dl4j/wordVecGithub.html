<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>WordVecGithub - 2</title><meta name="description" content="Word2VEC_java 是孙健（ansj）编写的一个谷歌 word2vec 的 java 实现版本，同时支持读取由谷歌 c 语言版 word2vec 训练产生的模型。Word2Vec 则是对其的进一步包装，同时实现了常用的词语相似度和句子相似度计算。"><meta name="keywords" content="WordVecGithub - 2"><script src="/static/js/jquery-3.3.1.min.js"></script><script src="/static/js/vue.min.js"></script><link rel="stylesheet" href="/static/css/normalize.min.css"><link rel="stylesheet" href="/static/css/monaco.css"><link rel="stylesheet" href="/static/css/loading.css"><link rel="stylesheet" href="/static/css/editormd.min.css"><link rel="stylesheet" href="/static/css/style.css"><link rel="stylesheet" href="/static/css/mobile.css"><link rel="stylesheet" href="/static/font-awesome-4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="/static/css/highlight.default.min.css"><script src="/static/js/highlight.min.js"></script><script>window._CONST={ROOT_PATH:"/"},hljs.initHighlightingOnLoad()</script></head><body><div class="main"><div class="tea-menu"><div class="tea-menu-title"><i class="fa fa-home" aria-hidden="true"></i> <span>2</span></div><div class="tea-menu-search-warp"><i class="fa fa-search"></i> <input type="text" placeholder="搜索文档" value="" height="100%"></div><ul class="tea-menu-list"><li><a href="/index.html" title="介绍" class="">介绍</a></li><li><a href="/quick_start.html" title="快速入门" class="">快速入门</a></li><li><a href="/install.html" title="安装" class="">安装</a></li><li><a title="Dart" class="">Dart<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/dart/flutter.html" title="Flutter相關資源" class="">Flutter相關資源</a></li><li><a href="/dart/Learn.html" title="Flutter學習程式範例" class="">Flutter學習程式範例</a></li><li><a href="/dart/UI.html" title="FlutterUI相關" class="">FlutterUI相關</a></li><li><a href="/dart/flutterGithub.html" title="FlutterGithub相關" class="">FlutterGithub相關</a></li><li><a href="/dart/flutterLibrary.html" title="Flutter常用庫" class="">Flutter常用庫</a></li><li><a href="/dart/flutterOpenSource.html" title="Flutter範例+源代碼+youtube連結" class="">Flutter範例+源代碼+youtube連結</a></li><li><a href="/dart/FlutterJson.html" title="Flutter Json" class="">Flutter Json</a></li></ul></li><li><a title="Python" class="">Python<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a title="AI相關" class="">AI相關<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/python/ai.html" title="AI相關" class="">AI相關</a></li><li><a href="/python/ai/fastText.html" title="FACEBOOK 出的 自然語言學習 fastText" class="">FACEBOOK 出的 自然語言學習 fastText</a></li></ul></li><li><a href="/python/flask.html" title="Flask" class="">Flask</a></li><li><a title="日文相關" class="">日文相關<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/python/jp/jp.html" title="日文相關用法" class="">日文相關用法</a></li><li><a href="/python/jp/githubJp.html" title="語言數據的Python庫（中文，日文和韓文）" class="">語言數據的Python庫（中文，日文和韓文）</a></li><li><a href="/python/jp/githubJp1.html" title="日语词典终端版" class="">日语词典终端版</a></li><li><a href="/python/jp/githubJp2.html" title="基於遞歸神經網絡的日語標記器" class="">基於遞歸神經網絡的日語標記器</a></li><li><a href="/python/jp/githubJp3.html" title="日本負面積極分類。日本語文書のネガポジを判定。" class="">日本負面積極分類。日本語文書のネガポジを判定。</a></li><li><a href="/python/jp/githubjp4.html" title="用純Python編寫的日本形態分析引擎 " class="">用純Python編寫的日本形態分析引擎</a></li><li><a href="/python/jp/other.html" title="其他" class="">其他</a></li></ul></li><li><a href="/python/Library.html" title="一些好用庫" class="">一些好用庫</a></li><li><a title="爬蟲" class="">爬蟲<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/python/spider/other.html" title="爬蟲相關" class="">爬蟲相關</a></li></ul></li></ul></li><li><a title="其他" class="">其他<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/other/Record.html" title="其他紀錄" class="">其他紀錄</a></li><li><a href="/other/AnkiWen.html" title="AnkiWen" class="">AnkiWen</a></li><li><a href="/other/book.html" title="電子書相關" class="">電子書相關</a></li><li><a href="/other/data.html" title="機器學習深度學習資料" class="">機器學習深度學習資料</a></li><li><a href="/other/aidata.html" title="學習語料與資料" class="">學習語料與資料</a></li><li><a href="/other/ai.html" title="AI相關" class="">AI相關</a></li></ul></li><li><a title="Git" class="">Git<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/git/Multiple_SSH_Keys.html" title="Multiple SSH Keys" class="">Multiple SSH Keys</a></li><li><a href="/git/git_Submodule.html" title="git Submodule" class="">git Submodule</a></li><li><a href="/git/git_subtree.html" title="git_subtree" class="">git_subtree</a></li><li><a href="/git/tuto.html" title="git基本用法" class="">git基本用法</a></li></ul></li><li><a title="java" class="active">java<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/java/other.html" title="其他" class="">其他</a></li><li><a title="DL4J" class="active">DL4J<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/java/dl4j/other.html" title="其他" class="">其他</a></li><li><a href="/java/dl4j/wordVecGithub.html" title="WordVecGithub" class="active">WordVecGithub</a></li></ul></li><li><a title="電子書">電子書<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/java/book/javabook.html" title="Java工程师修炼之道 - 梳理Java知识体系">Java工程师修炼之道 - 梳理Java知识体系</a></li><li><a href="/java/book/bookvideo.html" title="開源項目詳細資料與影片">開源項目詳細資料與影片</a></li></ul></li><li><a title="Vaadin">Vaadin<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/java/vaadin/other.html" title="其他">其他</a></li><li><a href="/java/vaadin/css.html" title="CSS">CSS</a></li></ul></li><li><a title="Android">Android<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/java/android/other.html" title="其他">其他</a></li><li><a href="/java/android/tips.html" title="填坑手冊">填坑手冊</a></li></ul></li></ul></li><li><a href="/template_markdown.html" title="markdown模版">markdown模版</a></li><li><a href="/custom_theme.html" title="自定义主题">自定义主题</a></li><li><a href="/deploy.html" title="部署">部署</a></li></ul><div class="tea-version"><p>version: 0.0.1</p><p>Built with <a href="https://github.com/lisniuse/teadocs" target="_blank">Teadocs</a></p></div></div><div class="tea-content"><div class="tea-nav"><h3 class="top-title" style="font-weight:500;margin:0;font-size:16px"><i class="fa fa-navicon" aria-hidden="true"></i> <span>WordVecGithub</span></h3></div><div class="tea-container"><article class="markdown-body"><h1 id="Word2Vec"><a href="#Word2Vec" class="header-anchor">#</a> <span>Word2Vec</span></h1><p><a href="https://github.com/NLPchina/Word2VEC_java">Word2VEC_java</a> 是<a href="http://www.nlpcn.org/">孙健</a>（ansj）编写的一个谷歌 word2vec 的 java 实现版本，同时支持读取由谷歌 c 语言版 <a href="https://github.com/svn2github/word2vec">word2vec</a> 训练产生的模型。Word2Vec 则是对其的进一步包装，同时实现了常用的词语相似度和句子相似度计算。</p><h2 id="下载"><a href="#下载" class="header-anchor">#</a> <span>下载</span></h2><ul><li><a href="https://github.com/jsksxs360/Word2Vec/releases/">Word2Vec.jar</a></li><li><a href="#3-%E7%BB%B4%E5%9F%BA%E7%99%BE%E7%A7%91%E4%B8%AD%E6%96%87%E8%AF%AD%E6%96%99%E5%B7%B2%E5%88%86%E5%A5%BD%E8%AF%8D">维基百科中文语料(测试使用)</a></li></ul><h2 id="如何使用"><a href="#如何使用" class="header-anchor">#</a> <span>如何使用</span></h2><h3 id="1.-新建-Word2Vec-对象，加载模型:"><a href="#1.-新建-Word2Vec-对象，加载模型:" class="header-anchor">#</a> <span>1. 新建 Word2Vec 对象，加载模型:</span></h3><p>Word2Vec 同时支持加载谷歌模型和 Java 模型，分别使用 <code>loadGoogleModel()</code> 和 <code>loadJavaModel()</code> 函数读取。关于如何训练模型，请见<a href="#%E8%AE%AD%E7%BB%83-word2vec-%E6%A8%A1%E5%9E%8B">训练 word2vec 模型</a>。</p><pre class="prettyprint language-java"><code>Word2Vec vec = new Word2Vec();
try {
    vec.loadGoogleModel("data/wiki_chinese_word2vec(Google).model");
} catch (IOException e) {
    e.printStackTrace();
}</code></pre><h3 id="2.-计算词语的语义相似度:"><a href="#2.-计算词语的语义相似度:" class="header-anchor">#</a> <span>2. 计算词语的语义相似度:</span></h3><p>Word2Vec 提供了简单的词语相似度计算方法，可以直接调用 <code>wordSimilarity()</code> 函数计算两个词语的相似度，也可以通过 <code>getSimilarWords()</code> 函数获取与指定词语相似的词语。</p><pre class="prettyprint language-java"><code>//计算词语相似度
System.out.println("狗|猫: " + vec.wordSimilarity("狗", "猫"));
System.out.println("计算机|电脑: " + vec.wordSimilarity("计算机", "电脑"));
System.out.println("计算机|人: " + vec.wordSimilarity("计算机", "人"));

//获取相似的词语
Set&lt;WordEntry&gt; similarWords = vec.getSimilarWords("漂亮", 10);
for(WordEntry word : similarWords) {
    System.out.println(word.name + " : " + word.score);
}</code></pre><h4 id="输出结果："><a href="#输出结果：" class="header-anchor">#</a> <span>输出结果：</span></h4><pre class="prettyprint language-java"><code>狗|猫: 0.71021223
计算机|电脑: 0.64130974
计算机|人: 0.060623944

//与"漂亮"语义相似的前10个词语:
可爱 : 0.7255844
时髦 : 0.68324685
脸蛋 : 0.6748609
打扮 : 0.6430359
乖巧 : 0.6370341
迷人 : 0.63440853
甜美 : 0.6340918
温柔 : 0.63337386
爽朗 : 0.63315964
聪明 : 0.6319053</code></pre><h3 id="3.-计算句子的语义相似度:"><a href="#3.-计算句子的语义相似度:" class="header-anchor">#</a> <span>3. 计算句子的语义相似度:</span></h3><p>Word2Vec 还提供了计算句子相似度的方法 <code>fastSentenceSimilarity()</code> 和 <code>sentenceSimilarity()</code>，输入是两个分好词的句子(即两个词语列表)，还支持自定义每个词语在相似度计算中的权值(默认所有词语权值为1)。</p><p>为了方便测试，Word2Vec 对 <a href="https://github.com/NLPchina/ansj_seg">Ansj中文分词</a> 进行了包装，提供了一个简易的分词工具类 <code>Segment</code>，用来获取分词后的词语列表和词性列表。在实际使用中，也可以使用自己的分词工具(比如 <a href="https://github.com/NLPchina/ansj_seg">Ansj中文分词</a>、<a href="http://stanfordnlp.github.io/CoreNLP/">斯坦福NLP</a>、<a href="https://github.com/HIT-SCIR/ltp">哈工大语言技术平台</a>、<a href="http://ictclas.nlpir.org/">中科院分词系统</a>、<a href="https://github.com/hankcs/HanLP">HanLP</a> 等)。</p><pre class="prettyprint language-java"><code>String s1 = "苏州有多条公路正在施工，造成局部地区汽车行驶非常缓慢。";
String s2 = "苏州最近有多条公路在施工，导致部分地区交通拥堵，汽车难以通行。";
String s3 = "苏州是一座美丽的城市，四季分明，雨量充沛。";

//分词，获取词语列表
List&lt;String&gt; wordList1 = Segment.getWords(s1);
List&lt;String&gt; wordList2 = Segment.getWords(s2);
List&lt;String&gt; wordList3 = Segment.getWords(s3);

//快速句子相似度
System.out.println("快速句子相似度:");
System.out.println("s1|s1: " + vec.fastSentenceSimilarity(wordList1, wordList1));
System.out.println("s1|s2: " + vec.fastSentenceSimilarity(wordList1, wordList2));
System.out.println("s1|s3: " + vec.fastSentenceSimilarity(wordList1, wordList3));

//句子相似度(所有词语权值设为1)
System.out.println("s1|s1: " + vec.sentenceSimilarity(wordList1, wordList1));
System.out.println("s1|s2: " + vec.sentenceSimilarity(wordList1, wordList2));
System.out.println("s1|s3: " + vec.sentenceSimilarity(wordList1, wordList3));

//句子相似度(名词、动词权值设为1，其他设为0.8)
float[] weightArray1 = Segment.getPOSWeightArray(Segment.getPOS(s1));
float[] weightArray2 = Segment.getPOSWeightArray(Segment.getPOS(s2));
float[] weightArray3 = Segment.getPOSWeightArray(Segment.getPOS(s3));
System.out.println("s1|s1: " + vec.sentenceSimilarity(wordList1, wordList1, weightArray1, weightArray1));
System.out.println("s1|s2: " + vec.sentenceSimilarity(wordList1, wordList2, weightArray1, weightArray2));
System.out.println("s1|s3: " + vec.sentenceSimilarity(wordList1, wordList3, weightArray1, weightArray3));</code></pre><h4 id="输出结果："><a href="#输出结果：" class="header-anchor">#</a> <span>输出结果：</span></h4><pre class="prettyprint language-java"><code>//快速句子相似度
s1|s1: 1.0000006
s1|s2: 0.9144124
s1|s3: 0.6289892

//句子相似度:
s1|s1: 1.0
s1|s2: 0.7888574
s1|s3: 0.4520114

//句子相似度(名词、动词权值设为1，其他设为0.8):
s1|s1: 1.0
s1|s2: 0.7922064
s1|s3: 0.45209178</code></pre><p><strong>注意：</strong> 加载不同的 word2vec 模型，计算相似度的结果也不同。</p><h2 id="训练-word2vec-模型"><a href="#训练-word2vec-模型" class="header-anchor">#</a> <span>训练 word2vec 模型</span></h2><h3 id="1.-训练-Java-版模型"><a href="#1.-训练-Java-版模型" class="header-anchor">#</a> <span>1. 训练 Java 版模型</span></h3><p><a href="https://github.com/NLPchina/Word2VEC_java">Word2VEC_java</a> 实现了 java 下的 word2vec 模型训练，Word2Vec 对其封装，也提供了相应的调用接口：</p><pre class="prettyprint language-java"><code>void trainJavaModel(String trainFilePath, String modelFilePath)</code></pre><ul><li>trainFilePath: 训练文件路径</li><li>modelFilePath: 模型文件路径</li></ul><p><strong>trainJavaModel</strong> 为静态函数，可以直接调用：</p><pre class="prettyprint"><code>try {
    Word2Vec.trainJavaModel("data/train.txt", "data/test.model");
} catch (IOException e) {
    e.printStackTrace();
}</code></pre><h3 id="2.-训练-Google-版模型"><a href="#2.-训练-Google-版模型" class="header-anchor">#</a> <span>2. 训练 Google 版模型</span></h3><p>Google 实现的 C 语言版的 word2vec 是目前公认的准确率最高的 word2vec 版本，因而训练更推荐直接使用 google 的原版。ansj 实现的 java 版也支持训练模型，但是准确率未和 Google 版做过比较。</p><p>下面提供两个 GitHub 上克隆的 Google word2vec 项目：</p><ul><li><a href="https://github.com/svn2github/word2vec">word2vec:</a> Google 原版的克隆</li><li><a href="https://github.com/dav/word2vec">word2vec:</a> 在 Google 原版上稍作修改，可以在 MacOS 上编译。</li></ul><p>下载后使用 <code>make</code> 命令编译，之后使用编译出的 <strong>word2vec</strong> 来训练模型：</p><pre class="prettyprint language-bash"><code>./word2vec -train $TEXT_DATA -output $VECTOR_DATA -cbow 0 -size 200 -window 5 -negative 0 -hs 1 -sample 1e-3 -threads 12 -binary 1</code></pre><p>简单说明一下：<br><code>TEXT_DATA</code> 为训练文本文件路径，词之间使用空格分隔；<code>VECTOR_DATA</code> 为输出的模型文件；不使用 cbow 模型，默认为 Skip-Gram 模型；每个单词的向量维度是 200；训练的窗口大小为 5；不使用 NEG 方法，使用 HS 方法；<code>-sampe</code> 指的是采样的阈值，如果一个词语在训练样本中出现的频率越大，那么就越会被采样；<code>-binary</code> 为 1 指的是结果二进制存储，为 0 是普通存储。</p><h3 id="3.-维基百科中文语料(已分好词)"><a href="#3.-维基百科中文语料(已分好词)" class="header-anchor">#</a> <span>3. 维基百科中文语料(已分好词)</span></h3><p>详情请见 <a href="https://github.com/jsksxs360/AHANLP/blob/master/w2v.markdown"><strong>Word2Vector 模型</strong></a>，可以下载训练好的 Google 版模型及对应的训练语料。</p><p>如果想对最新的维基百科中文语料进行处理，可以参考<a href="http://xiaosheng.me/2017/05/26/article63/">《维基百科中文语料库词向量的训练》</a>。</p><h3 id="4.-Python-版本"><a href="#4.-Python-版本" class="header-anchor">#</a> <span>4. Python 版本</span></h3><p>Word2Vec 也提供了 Python 的实现版本（需要安装 <a href="https://radimrehurek.com/gensim/">gensim</a> 依赖包），只需下载 <a href="https://github.com/jsksxs360/Word2Vec/tree/master/python/Word2Vec.py">Word2Vec.py</a>，然后 <code>from Word2Vec import Word2Vec</code> 引入项目即可：</p><pre class="prettyprint language-python"><code>from Word2Vec import Word2Vec

w2v = Word2Vec('/Users/jim/Desktop/wiki_chinese_word2vec.model', kind='bin')

print('狗|猫: ', w2v.word_similarity('狗', '猫'))
print('计算机|电脑: ', w2v.word_similarity('计算机', '电脑'))
print('计算机|人: ', w2v.word_similarity('计算机', '人'))</code></pre><p>详细示例可以参见 <a href="https://github.com/jsksxs360/Word2Vec/tree/master/python/test.py">test.py</a>。</p><h2 id="参考"><a href="#参考" class="header-anchor">#</a> <span>参考</span></h2><ul><li><a href="http://blog.csdn.net/zhoubl668/article/details/24314769">word2vec使用指导</a></li><li><a href="http://www.hankcs.com/nlp/word2vec.html">word2vec原理推导与代码分析</a></li></ul></article></div></div><i class="fa fa-arrow-circle-up gotop" aria-hidden="true"></i><div id="menu-mask"></div></div><script src="/static/js/main.js"></script><script src="/static/js/mobile.js"></script>
<script src="/__webscoket__/socket.io.js"></script>
<script src="/__webscoket__/socket.client.js"></script>
</body></html>